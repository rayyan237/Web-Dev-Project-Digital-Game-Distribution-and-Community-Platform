<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Details | Professional Distro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* --- 1. CORE VARIABLES --- */
        :root {
            --gp-bg-dark: #171a21;
            --gp-bg-main: #1b2838;
            --gp-text-main: #c6d4df;
            --gp-text-blue: #66c0f4;
            --gp-btn-green-top: #799905;
            --gp-btn-green-bot: #536904;
        }

        body {
            background-color: var(--gp-bg-main);
            color: var(--gp-text-main);
            font-family: Arial, Helvetica, sans-serif;
            font-size: 14px;
            margin: 0;
            overflow-x: hidden;
        }

        a { text-decoration: none; color: var(--gp-text-main); transition: 0.2s; }
        a:hover { color: #fff; }

        /* --- GLOBAL NAV --- */
        .global-nav {
            background: var(--gp-bg-dark);
            height: 60px;
            display: flex;
            align-items: center;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .nav-link-custom {
            color: #b8b6b4;
            text-transform: uppercase;
            font-weight: bold;
            padding: 0 15px;
            font-size: 13px;
        }
        .nav-link-custom:hover { color: #fff; }
        .store-nav {
            background: rgba(62, 126, 167, 0.2);
            height: 35px;
            display: flex;
            align-items: center;
            font-size: 13px;
            margin-bottom: 20px;
        }

        .page-wrapper {
            max-width: 960px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* --- HEADER & HERO --- */
        .game-header-title {
            font-size: 26px;
            color: #fff;
            margin-bottom: 5px;
        }
        /* Breadcrumb style removed */

        .hero-bg { background: rgba(0,0,0,0.2); }

        /* Gallery - Strict Layout Control */
        .gallery-wrapper {
            width: 100%;
        }
        .main-media-view {
            width: 100%;
            aspect-ratio: 16/9; /* Forces strict rectangle */
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .main-media-view img, .main-media-view video {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Shows full image with black bars if ratio differs */
        }
        .thumbs-row {
            display: flex;
            gap: 4px;
            margin-top: 4px;
            height: 69px;
            overflow-x: auto;
            background: #000;
            scrollbar-width: thin;
            scrollbar-color: #3d4450 #000;
        }
        .thumbs-row::-webkit-scrollbar { height: 6px; }
        .thumbs-row::-webkit-scrollbar-track { background: #000; }
        .thumbs-row::-webkit-scrollbar-thumb { background: #3d4450; border-radius: 3px; }

        .thumb-unit {
            width: 120px;
            height: 65px; /* Strict height */
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.2s;
            flex-shrink: 0;
            border: 1px solid transparent;
        }
        .thumb-unit:hover, .thumb-unit.active { opacity: 1; border: 1px solid #fff; }
        .thumb-unit img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
        }

        /* Side Info */
        .side-info-panel { padding-left: 15px; }
        .header-capsule {
            width: 100%;
            height: 151px; /* Fixed height to prevent layout jump */
            margin-bottom: 10px;
            box-shadow: 0 0 5px rgba(0,0,0,0.5);
            object-fit: cover; 
        }
        .short-description {
            font-size: 13px;
            line-height: 18px;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 6;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 108px; /* Reserve space */
        }
        .meta-data-row { display: flex; font-size: 12px; margin-bottom: 2px; }
        .meta-title { color: #556772; text-transform: uppercase; font-size: 10px; width: 90px; padding-top: 3px; }
        .meta-content { color: #66c0f4; }
        .game-tag {
            background: #2a475e;
            color: #67c1f5;
            padding: 2px 7px;
            border-radius: 2px;
            font-size: 11px;
            display: inline-block;
            margin: 0 2px 2px 0;
            cursor: pointer;
        }

        /* --- PURCHASE BAR --- */
        .purchase-widget {
            background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(0,0,0,0.1));
            margin: 30px 0;
            position: relative;
            padding: 2px; 
        }
        .purchase-inner {
            background: linear-gradient(-60deg, rgba(42,65,81,1) 0%, rgba(27,40,56,1) 100%);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 2px;
        }
        .buy-game-title { font-size: 22px; color: #fff; margin: 0; }
        
        .btn-add-cart {
            background: linear-gradient(to bottom, var(--gp-btn-green-top) 5%, var(--gp-btn-green-bot) 95%);
            border: none;
            border-radius: 2px;
            color: #d2efa9;
            font-weight: bold;
            font-size: 15px;
            padding: 8px 30px; 
            text-shadow: 1px 1px 0 rgba(0,0,0,0.3);
            cursor: pointer;
        }
        .btn-add-cart:hover {
            background: linear-gradient(to bottom, #a3cf06 5%, #6e8c05 95%);
            color: #fff;
        }

        /* --- CONTENT & RAIL --- */
        .section-header {
            text-transform: uppercase;
            font-size: 14px;
            color: #fff;
            border-bottom: 1px solid #3b4d61;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }
        .description-content { color: #acb2b8; line-height: 1.6; margin-bottom: 30px; }

        /* Rail Box Generic */
        .rail-box {
            background: rgba(0,0,0,0.2);
            padding: 12px;
            margin-bottom: 15px;
            font-size: 12px;
        }
        .rail-field {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            padding-bottom: 4px;
        }
        .rail-label { color: #8f98a0; }
        .rail-val { color: #66c0f4; }

        /* System Requirements Specifics */
        .sys-req-title {
            color: #fff;
            font-size: 12px;
            margin-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 4px;
        }
        .sys-req-block {
            font-size: 11px;
            color: #acb2b8;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        .sys-req-block strong { color: #c6d4df; display: block; margin-bottom: 2px; }
        .sys-req-item { margin-bottom: 4px; }
        .sys-label { color: #6b7782; }

        /* --- REVIEWS --- */
        .write-review-box {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            margin-bottom: 25px;
            border: 1px solid #2a475e;
        }
        .form-control-steam {
            background: #222b35;
            border: 1px solid #000;
            color: #d6d7d8;
            font-size: 13px;
            margin-bottom: 10px;
        }
        .form-control-steam:focus { 
            background: #2a3f5a; 
            color: #fff; 
            border-color: #66c0f4; 
            box-shadow: none; 
        }
        
        /* Auto-Expand Logic */
        textarea.form-control-steam {
            resize: none; 
            overflow: hidden;
            min-height: 50px;
        }
        
        .btn-post-review {
            background: #2a475e;
            color: #66c0f4;
            border: none;
            padding: 6px 15px;
            font-size: 13px;
            cursor: pointer;
        }
        .btn-post-review:hover { background: #67c1f5; color: #fff; }

        /* Review List */
        .review-card {
            background: rgba(0, 0, 0, 0.2);
            margin-bottom: 16px;
            display: flex;
        }
        .review-user {
            width: 164px;
            background: rgba(0,0,0,0.3);
            padding: 10px;
            flex-shrink: 0;
        }
        .avatar-holder {
            width: 34px;
            height: 34px;
            border: 1px solid #555;
            float: left;
            margin-right: 8px;
        }
        .avatar-holder img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
        }
        .user-name { font-size: 13px; color: #c1dbf4; font-weight: bold; display: block; overflow: hidden; text-overflow: ellipsis; }
        
        .review-body {
            flex-grow: 1;
            padding: 10px;
            background: #16202d;
        }
        .review-rating-bar {
            background: rgba(0,0,0,0.2);
            padding: 5px;
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .thumb-icon { font-size: 20px; margin-right: 10px; }
        .posted-date {
            font-size: 10px;
            color: #8091a2;
            text-transform: uppercase;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 5px;
        }
        .review-text { font-family: "Georgia", serif; font-size: 13px; color: #acb2b8; line-height: 1.5; }

        footer {
            background: #000;
            padding: 40px 0;
            text-align: center;
            color: #8f98a0;
            font-size: 12px;
            margin-top: 50px;
        }
    </style>
</head>
<body>

<div class="global-nav">
    <div class="page-wrapper" style="width: 100%; display: flex; align-items: center;">
        <i class="fas fa-gamepad fa-2x" style="color: #fff; margin-right: 20px;"></i>
        <a href="#" class="nav-link-custom">Store</a>
        <a href="#" class="nav-link-custom">Community</a>
        <a href="#" class="nav-link-custom">About</a>
        <a href="#" class="nav-link-custom">Support</a>
    </div>
</div>

<div class="store-nav">
    <div class="page-wrapper" style="width: 100%;">
        <span style="margin-right: 20px; font-weight: bold; color: #fff;">Your Store</span>
        <span style="margin-right: 20px;">New & Noteworthy</span>
        <span style="margin-right: 20px;">Categories</span>
    </div>
</div>

<div class="page-wrapper">
    
    <h1 class="game-header-title" id="displayTitle" style="margin-top: 20px;"></h1>

    <div class="row g-0 hero-bg">
        <div class="col-lg-8" style="border-right: 1px solid transparent;">
            <div class="gallery-wrapper">
                <div class="main-media-view" id="mainMediaStage"></div>
                <div class="thumbs-row" id="thumbStrip"></div>
            </div>
        </div>

        <div class="col-lg-4 side-info-panel">
            <img id="headerCapsule" src="https://images.unsplash.com/photo-1519074069444-1ba4fff66d16?auto=format&fit=crop&q=80&w=600&h=300" class="header-capsule" alt="Game Banner">
            
            <div class="short-description" id="shortDesc"></div>

            <div class="meta-data-row">
                <div class="meta-title">Release Date:</div>
                <div class="meta-content" id="releaseDate"></div>
            </div>
            <div class="meta-data-row">
                <div class="meta-title">Developer:</div>
                <div class="meta-content" id="developer"></div>
            </div>
            
            <div class="tag-block">
                <div class="tag-label">Popular tags:</div>
                <div id="tagContainer"></div>
            </div>
        </div>
    </div>

    <div class="purchase-widget">
        <div class="purchase-inner">
            <h2 class="buy-game-title">Download <span id="buyTitle"></span></h2>
            <div class="price-actions">
                <button class="btn-add-cart">Download Now</button>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8 col-left-main">
            <h3 class="section-header">About This Game</h3>
            <div class="description-content" id="fullDesc"></div>

            <h3 class="section-header" style="margin-top: 50px;">Customer Reviews</h3>

            <div class="write-review-box">
                <div style="color: #66c0f4; font-size: 16px; margin-bottom: 10px;">Write a Review</div>
                <div class="row">
                    <div class="col-md-8">
                        <input type="text" id="reviewName" class="form-control form-control-steam" placeholder="Your Name (Optional)">
                    </div>
                    <div class="col-md-4">
                        <select id="reviewRating" class="form-control form-control-steam">
                            <option value="5">Recommended</option>
                            <option value="1">Not Recommended</option>
                        </select>
                    </div>
                </div>
                
                <textarea id="reviewText" class="form-control form-control-steam" rows="1" placeholder="Share your thoughts..." oninput="autoResize(this)"></textarea>
                
                <button onclick="addReview()" class="btn-post-review">Post Review</button>
            </div>

            <div id="reviewsWrapper">
                </div>
        </div>

        <div class="col-lg-4 col-right-rail">
            <div class="rail-box">
                <div class="rail-field">
                    <span class="rail-label">Single-player</span>
                    <span class="rail-val"><i class="fas fa-check"></i></span>
                </div>
                <div class="rail-field">
                    <span class="rail-label">Avg Rating</span>
                    <span class="rail-val" id="railRating"></span>
                </div>
            </div>

            <div class="rail-box">
                <div class="sys-req-title">System Requirements</div>
                
                <div class="sys-req-block">
                    <strong>Minimum:</strong>
                    <div class="sys-req-item"><span class="sys-label">OS:</span> Windows 10 or later 64-bit</div>
                    <div class="sys-req-item"><span class="sys-label">Processor:</span> Intel Core i5-6600K / AMD Ryzen R5 1600</div>
                    <div class="sys-req-item"><span class="sys-label">Memory:</span> 12 GB RAM</div>
                    <div class="sys-req-item"><span class="sys-label">Graphics:</span> GTX 1050 Ti / RX 580 / Arc A380</div>
                    <div class="sys-req-item"><span class="sys-label">DirectX:</span> Version 12</div>
                    <div class="sys-req-item"><span class="sys-label">Network:</span> Broadband Internet</div>
                </div>

                <div class="sys-req-block">
                    <strong>Recommended:</strong>
                    <div class="sys-req-item"><span class="sys-label">OS:</span> Windows 10 or later 64-bit</div>
                    <div class="sys-req-item"><span class="sys-label">Processor:</span> Intel Core i5-9600K / AMD Ryzen 5 3600</div>
                    <div class="sys-req-item"><span class="sys-label">Memory:</span> 16 GB RAM</div>
                    <div class="sys-req-item"><span class="sys-label">Graphics:</span> RTX 2070 / RX 5700 XT / Arc B570</div>
                    <div class="sys-req-item"><span class="sys-label">DirectX:</span> Version 12</div>
                </div>
            </div>

        </div>
    </div>

</div>

<footer>
    <div class="page-wrapper">
        <p>&copy; 2025 Valve Corporation. All rights reserved.</p>
    </div>
</footer>

<script>
    const db = {
        game: {
            game_id: 28,
            title: "The Witcher 3 Wild Hunt",
            developer_name: "CD PROJEKT RED",
            price: "39.99",
            release_date: "18 May, 2015",
            description: "<p>The Witcher 3: Wild Hunt is a story-driven, next-generation open world role-playing game set in a visually stunning fantasy universe full of meaningful choices and impactful consequences. In The Witcher you play as the professional monster hunter, Geralt of Rivia.</p>",
            average_rating: "4.90"
        },
        genres: [ "Role-Playing (RPG)", "Adventure", "Action" ],
        tags: [ "Open World", "RPG", "Story Rich", "Fantasy", "Third Person" ],
        media: [
            // Video 
            { type: 'video', url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4' }, 
            // Real Images
            { type: 'screenshot', url: 'https://images.unsplash.com/photo-1519074069444-1ba4fff66d16?auto=format&fit=crop&q=80&w=1200' },
            { type: 'screenshot', url: 'https://images.unsplash.com/photo-1627850604058-52e40de1b8c4?auto=format&fit=crop&q=80&w=1200' },
            { type: 'screenshot', url: 'https://images.unsplash.com/photo-1599557452655-32e7372c050a?auto=format&fit=crop&q=80&w=1200' },
            { type: 'screenshot', url: 'https://images.unsplash.com/photo-1533518463841-d62e1fc91373?auto=format&fit=crop&q=80&w=1200' }
        ],
        reviews: [
            {
                username: "GeraltOfRivia",
                avatar_url: "https://i.pravatar.cc/150?u=Geralt",
                rating: 5,
                comment: "Best game I have ever played. The attention to detail is staggering.",
                created_at: "12 May, 2024"
            },
            {
                username: "YenneferStan",
                avatar_url: "https://i.pravatar.cc/150?u=Yen",
                rating: 5,
                comment: "Team Yen all the way. Triss fans do not interact.",
                created_at: "1 June, 2024"
            },
            {
                username: "RandomPeasant",
                avatar_url: "https://i.pravatar.cc/150?u=Peasant",
                rating: 1,
                comment: "Good game but Roach keeps getting stuck on roofs.",
                created_at: "20 July, 2024"
            }
        ]
    };

    function initPage() {
        const g = db.game;

        document.getElementById('displayTitle').innerText = g.title;
        // Breadcrumb logic removed
        document.getElementById('buyTitle').innerText = g.title;
        
        document.getElementById('shortDesc').innerHTML = stripHtml(g.description).substring(0, 300) + "...";
        document.getElementById('fullDesc').innerHTML = g.description;
        document.getElementById('releaseDate').innerText = g.release_date;
        document.getElementById('developer').innerText = g.developer_name;

        const tagBox = document.getElementById('tagContainer');
        db.tags.forEach(tag => {
            const span = document.createElement('span');
            span.className = 'game-tag';
            span.innerText = tag;
            tagBox.appendChild(span);
        });

        document.getElementById('railRating').innerText = g.average_rating + "/5";

        renderGallery();
        renderReviews();
    }

    function renderGallery() {
        const stage = document.getElementById('mainMediaStage');
        const strip = document.getElementById('thumbStrip');
        
        db.media.forEach((item, idx) => {
            const div = document.createElement('div');
            div.className = `thumb-unit ${idx===0?'active':''}`;
            
            if(item.type === 'video') {
                div.innerHTML = `<div style="position:relative; width:100%; height:100%; overflow:hidden;">
                    <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&q=80&w=200" style="opacity:0.6; width:100%; height:100%; object-fit:cover;">
                    <i class="fas fa-play-circle" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:#fff; font-size:24px;"></i>
                </div>`;
            } else {
                div.innerHTML = `<img src="${item.url}">`;
            }

            div.onclick = () => {
                document.querySelectorAll('.thumb-unit').forEach(el => el.classList.remove('active'));
                div.classList.add('active');
                setStage(item);
            };
            strip.appendChild(div);
        });

        if(db.media.length > 0) setStage(db.media[0]);
    }

    function setStage(item) {
        const stage = document.getElementById('mainMediaStage');
        stage.innerHTML = ''; 

        if(item.type === 'video') {
            const vid = document.createElement('video');
            vid.src = item.url;
            vid.controls = true;
            vid.autoplay = true;
            vid.muted = true;
            vid.style.width = "100%";
            vid.style.height = "100%";
            stage.appendChild(vid);
        } else {
            const img = document.createElement('img');
            img.src = item.url;
            stage.appendChild(img);
        }
    }

    // --- REVIEWS & AUTO-EXPAND LOGIC ---

    function autoResize(el) {
        el.style.height = 'auto'; // Reset height
        el.style.height = el.scrollHeight + 'px'; // Set to scroll height
    }

    function renderReviews() {
        const container = document.getElementById('reviewsWrapper');
        container.innerHTML = ""; 
        
        db.reviews.forEach(review => {
            const isRec = review.rating >= 3;
            
            const html = `
            <div class="review-card">
                <div class="review-user">
                    <div class="avatar-holder">
                        <img src="${review.avatar_url}">
                    </div>
                    <span class="user-name">${review.username}</span>
                    <span class="user-products">Owner</span>
                </div>
                <div class="review-body">
                    <div class="review-rating-bar">
                        <div class="thumb-icon">
                            <i class="fas ${isRec ? 'fa-thumbs-up' : 'fa-thumbs-down'}" style="color: ${isRec ? '#f0f0f0' : '#d83030'}"></i>
                        </div>
                        <div class="rec-text">${isRec ? 'Recommended' : 'Not Recommended'}</div>
                    </div>
                    <div class="posted-date">Posted: ${review.created_at}</div>
                    <div class="review-text">${review.comment}</div>
                </div>
            </div>`;
            
            container.innerHTML += html;
        });
    }

    function addReview() {
        const nameInput = document.getElementById('reviewName');
        const ratingInput = document.getElementById('reviewRating');
        const textInput = document.getElementById('reviewText');

        if(textInput.value.trim() === "") {
            alert("Please write a comment.");
            return;
        }

        const newReview = {
            username: nameInput.value.trim() || "Guest Player",
            avatar_url: `https://i.pravatar.cc/150?u=${Date.now()}`,
            rating: parseInt(ratingInput.value),
            comment: textInput.value,
            created_at: new Date().toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' })
        };

        db.reviews.unshift(newReview);
        renderReviews();

        textInput.value = "";
        textInput.style.height = "auto";
        nameInput.value = "";
    }

    function stripHtml(html) {
       let tmp = document.createElement("DIV");
       tmp.innerHTML = html;
       return tmp.textContent || tmp.innerText || "";
    }

    document.addEventListener('DOMContentLoaded', initPage);

</script>

</body>
</html>